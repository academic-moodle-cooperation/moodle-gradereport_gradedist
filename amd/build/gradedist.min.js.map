{"version":3,"sources":["../src/gradedist.js"],"names":["define","$","log","str","Gradedist","prototype","update","o","data","JSON","parse","responseText","updateall","window","absolut","percent","map","letters","letter","push","actdist","count","percentage","values","mode","chart","datasets","options","title","text","absolutnew","percentnew","newdist","instance","coverage","newvalues","validate","error","errdec","errint","errpre","erremp","errdecdiv","first","errintdiv","errprediv","decimals","pre","each","boundaries","id","boundary","value","replace","test","length","get_string","done","s","append","remove","submit","prop","errcov","newcoverage","errcovdiv","html","actcoverage","initChart","initdata","get_strings","key","component","Chart","type","labels","backgroundColor","borderWidth","display","fontSize","fontStyle","scales","yAxes","ticks","beginAtZero","padding","scaleLabel","labelString","fontColor","gridLines","drawBorder","lineWidth","color","zeroLineColor","xAxes","drawOnChartArea","barPercentage","legend","plugins","datalabels","anchor","align","initializer","config","info","require","register","beforeDraw","chartInstance","ctx","fillStyle","fillRect","width","height","uri","M","cfg","wwwroot","courseid","method","headers","complete","arg1","url","gradeitems","change","success","serialize","ajax","coursegroups","coursegroupings","notifications","desc","values_new","s_y","ext_y","Math","max","apply","suggestedMax","cols","click","column","checked","hidden","toprint","$printframe","imagePath","document","getElementById","toDataURL","contentWindow","write","setTimeout","print","topdf","html2pdf","container","positionInfo","getBoundingClientRect","contheight","contwidth","margin","filename","image","pagebreak","html2canvas","jsPDF","unit","format","orientation","topng","saveAs","get","toBlob","blob","tojpg"],"mappings":"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","sourcesContent":["// This file is part of mod_checkmark for Moodle - http://moodle.org/\n//\n// It is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// It is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * gradedist.js\n *\n * @package   gradereport_gradedist\n * @author    Andreas Krieger\n * @copyright 2014-2018 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n /**\n  * @module gradereport_gradedist/gradedist\n  */\n\ndefine(['jquery', 'core/log', 'core/str', 'gradereport_gradedist/config'],\nfunction($, log, str) {\n    /**\n     * @constructor\n     * @alias module:gradereport_gradedist/gradedist\n     */\n    var Gradedist = function() {\n    };\n\n    /*\n     * update() updates the chart according to the values currently set in the form\n     *\n     * @return true if everything's allright (no error handling by now)\n     */\n    Gradedist.prototype.update = function(o) {\n\n        var data = JSON.parse(o.responseText);\n\n        if (data.updateall == 1) {\n            window.absolut = [];\n            window.percent = [];\n\n            $.map(data.letters, function(letter) {\n                window.absolut.push(data.actdist[letter].count);\n                window.percent.push(data.actdist[letter].percentage);\n            });\n\n            var values = (window.mode == 1) ? window.percent : window.absolut;\n\n            window.chart.data.datasets[0].data = values;\n            window.chart.options.title.text = [data.title, \"\"];\n        }\n\n        window.absolutnew = [];\n        window.percentnew = [];\n\n        $.map(data.letters, function(letter) {\n            window.absolutnew.push(data.newdist[letter].count);\n            window.percentnew.push(data.newdist[letter].percentage);\n        });\n\n        instance.coverage(data);\n        var newvalues = (window.mode == 1) ? window.percentnew : window.absolutnew;\n        window.chart.data.datasets[1].data = newvalues;\n        window.chart.update();\n\n        return true;\n    };\n\n    /*\n     * validate() checks if the current boundaries given in the form data are\n     * syntactically and semantically correct and displays warnings based on this\n     *\n     * @return true if everything's allright, false on detected error\n     */\n    Gradedist.prototype.validate = function() {\n\n        var error = false;\n\n        var errdec = false;\n        var errint = false;\n        var errpre = false;\n        var erremp = false;\n\n        var errdecdiv = $('#b_decimals').first();\n        var errintdiv = $('#b_interval').first();\n        var errprediv = $('#b_predecessor').first();\n\n        var decimals = /^\\d+([.]\\d{1,2})?$/;\n        var pre = 100.01;\n\n        $.each(window.boundaries, function(id, boundary) {\n            var value = boundary.value.replace(/,/g, '.');\n            if (value != '') {\n                if (!decimals.test(value)) {\n                    errdec = true;\n                }\n                if (Number(value) > 100) {\n                    errint = true;\n                }\n                if (Number(value) >= Number(pre)) {\n                    errpre = true;\n                }\n\n                pre = value;\n            } else {\n                erremp = true;\n            }\n        });\n\n        if (errdec) {\n            if (!errdecdiv.length) {\n                str.get_string('decimals', 'gradereport_gradedist').done(function(s) {\n                    $('#boundary_error_container').first().append('<div class=\"b_error\" id=\"b_decimals\"><span>'\n                        + s + '</span></div>');\n                });\n            }\n            error = true;\n        } else if (errdecdiv.length) {\n            errdecdiv.remove();\n        }\n        if (errint) {\n            if (!errintdiv.length) {\n                str.get_string('interval', 'gradereport_gradedist').done(function(s) {\n                    $('#boundary_error_container').first().append('<div class=\"b_error\" id=\"b_interval\"><span>'\n                        + s + '</span></div>');\n                });\n            }\n            error = true;\n        } else if (errintdiv.length) {\n            errintdiv.remove();\n        }\n        if (errpre) {\n            if (!errprediv.length) {\n                str.get_string('predecessor', 'gradereport_gradedist').done(function(s) {\n                    $('#boundary_error_container').first().append('<div class=\"b_error\" id=\"b_predecessor\"><span>'\n                        + s + '</span></div>');\n                });\n            }\n            error = true;\n        } else if (errprediv.length) {\n            errprediv.remove();\n        }\n\n        if (window.submit.length) {\n            window.submit.prop('disabled', error || erremp);\n        }\n\n        $('#id_grp_export_export').prop('disabled', false);\n\n        return !error;\n    };\n\n    /*\n     * coverage() determines how many grades are covered/not covered by\n     * the current forms grade distribution and displays this information\n     *\n     * @return true if everything's allright, false on detected error\n     */\n    Gradedist.prototype.coverage = function(data) {\n\n        var error = false;\n        var erremp = false;\n        var errcov = Number(data.newcoverage[0]) != 0;\n        var errcovdiv = $('#b_coverage').first();\n\n        $.each(window.boundaries, function(id, boundary) {\n            if (boundary.value == '') {\n                erremp = true;\n            }\n        });\n\n        if (!erremp && errcov) {\n            if (!errcovdiv.length) {\n                str.get_string('coverage', 'gradereport_gradedist').done(function(s) {\n                    $('#boundary_error_container').first().append('<div class=\"b_error\" id=\"b_coverage\"><span>'\n                        + s + '</span><span class=\"newcoverage\">'\n                        + data.newcoverage[0] + '/' + data.newcoverage[1] + '</span></div>');\n                });\n            }\n            error = true;\n        } else if (errcovdiv.length) {\n            errcovdiv.remove();\n        }\n\n        $('.actcoverage').html(data.actcoverage[0] + '/' + data.actcoverage[1] + ' (' + data.actcoverage[2] + '%)');\n        $('.newcoverage').html(data.newcoverage[0] + '/' + data.newcoverage[1] + ' (' + data.newcoverage[2] + '%)');\n\n        return !error;\n    };\n\n    Gradedist.prototype.initChart = function(initdata, letters) {\n\n        var tofetch = [\n            {key: 'gradeletter', component: 'gradereport_gradedist'},\n            {key: 'absolut', component: 'gradereport_gradedist'},\n            {key: 'percent', component: 'gradereport_gradedist'},\n            {key: 'printchart', component: 'gradereport_gradedist'},\n            {key: 'downloadpng', component: 'gradereport_gradedist'},\n            {key: 'downloadjpeg', component: 'gradereport_gradedist'},\n            {key: 'downloadpdf', component: 'gradereport_gradedist'},\n            {key: 'downloadsvg', component: 'gradereport_gradedist'},\n            {key: 'downloadjpeg', component: 'gradereport_gradedist'},\n            {key: 'contextbuttontitle', component: 'gradereport_gradedist'},\n        ];\n\n\n\n        str.get_strings(tofetch).done(function(s) {\n            window.chart = new window.Chart($(\"#chart_container\"), {\n                type: 'bar',\n                data: {\n                    labels: letters,\n                    datasets: [{\n                        data: window.absolut,\n                        backgroundColor: '#990000',\n                        borderWidth: 1,\n                    },\n                    {\n                        data: window.absolutnew,\n                        backgroundColor: '#33cc33',\n                        borderWidth: 1\n                    }]\n                },\n                options: {\n                    title: {\n                        display: true,\n                        text: [initdata.title, \"\"],\n                        fontSize: 18,\n                        fontStyle: 'normal'\n                    },\n                    scales: {\n                        yAxes: [{\n                            ticks: {\n                                beginAtZero: true,\n                                //maxTicksLimit: 6,\n                                padding: 10\n                            },\n                            scaleLabel: {\n                                display: true,\n                                labelString: s[1],\n                                fontColor: \"#4d759e\",\n                                fontSize: 15\n                            },\n                            gridLines: {\n                                drawBorder: false,\n                                lineWidth: 0.3,\n                                color: '#000000',\n                                zeroLineColor: '#c0e0d0'\n                            },\n                        }],\n                        xAxes: [{\n                            scaleLabel: {\n                                display: true,\n                                labelString: s[0],\n                                fontColor: \"#4d759e\",\n                                fontSize: 15\n                            },\n                            gridLines: {\n                                drawOnChartArea: false,\n\n                            },\n                            barPercentage: 0.8\n                        }]\n                    },\n                    legend: {\n                        display: false\n                    },\n                    plugins: {\n                        datalabels: {\n                            anchor: 'end',\n                            align: 'top',\n                            color: '#000000'\n                        }\n                    }\n                }\n            });\n        });\n    };\n\n    var instance = new Gradedist();\n\n    /*\n     * initializer(config) prepares settings form for JS-functionality\n     */\n    instance.initializer = function(config) {\n\n        log.info('Initialize settings JS', 'gradedist');\n\n        require(['canvastoBlob']); // load canvastoBlob\n        var initdata = config.data;\n\n        window.mode = 0;\n        var letters = initdata.letters;\n\n        window.absolut = [];\n        window.percent = [];\n        window.absolutnew = [];\n        window.percentnew = [];\n\n        var submitSelector = \"#id_submitbutton\";\n        window.submit = $(submitSelector);\n        if (window.submit.length) {\n            window.submit.prop('disabled', true);\n        }\n\n        $.map(letters, function(letter) {\n            window.absolut.push(initdata.actdist[letter].count);\n            window.percent.push(initdata.actdist[letter].percentage);\n            window.absolutnew.push(initdata.newdist[letter].count);\n            window.percentnew.push(initdata.newdist[letter].percentage);\n        });\n\n        window.chart = [];\n\n        require(['ChartDataLabels'], function() {\n            window.Chart.plugins.register({\n                beforeDraw: function(chartInstance) {\n                    var ctx = chartInstance.chart.ctx;\n                    ctx.fillStyle = \"white\";\n                    ctx.fillRect(0, 0, chartInstance.chart.width, chartInstance.chart.height);\n                }\n            });\n            instance.initChart(initdata, letters);\n        });\n\n        var uri = M.cfg.wwwroot + '/grade/report/gradedist/ajax_handler.php?id=' + initdata.courseid;\n\n        var cfg = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n            },\n            complete: function(arg1) { instance.update(arg1); },\n            url: uri\n        };\n\n        var gradeitemsSelector = \"#id_gradeitem\";\n        var gradeitems = $(gradeitemsSelector).first();\n        gradeitems.change(instance, function() {\n            var success = $('.alert-success');\n            if (success) {\n                success.remove();\n            }\n            cfg.data = $('#letterform').serialize() + \"&updateall=1\";\n            $.ajax(cfg);\n        });\n\n        var coursegroupsSelector = \"#id_coursegroup\";\n        var coursegroups = $(coursegroupsSelector).first();\n        if (coursegroups) {\n            coursegroups.change(instance, function() {\n                var success = $('.alert-success');\n                if (success) {\n                    success.remove();\n                }\n                $('#id_coursegrouping').first().prop('value', '0');\n                cfg.data = $('#letterform').serialize() + \"&updateall=1\";\n                $.ajax(cfg);\n            });\n        }\n\n        var coursegroupingsSelector = \"#id_coursegrouping\";\n        var coursegroupings = $(coursegroupingsSelector).first();\n        if (coursegroupings) {\n            coursegroupings.change(instance, function() {\n                var success = $('.alert-success');\n                if (success) {\n                    success.remove();\n                }\n                $('#id_coursegroup').first().prop('value', '0');\n                cfg.data = $('#letterform').serialize() + \"&updateall=1\";\n                $.ajax(cfg);\n            });\n        }\n\n        window.boundaries = $('.gradeboundaries_new input[type=text], #fgroup_id_grp_gradeboundaries_new input[type=text]');\n        window.boundaries.change(instance, function() {\n            var notifications =\n                    $('#page-grade-report-gradedist-index .notifyproblem, #page-grade-report-gradedist-index .notifysuccess');\n            if (notifications) {\n                notifications.remove();\n            }\n            var success = $('.alert-success');\n            if (success) {\n                success.remove();\n            }\n            if (instance.validate()) {\n                cfg.data = $('#letterform').serialize() + \"&updateall=1\";\n                $.ajax(cfg);\n            }\n        });\n\n        var desc = $('input[name^=\"grp_description\"]');\n        desc.change(instance, function() {\n            window.mode = this.value;\n            var values, values_new;\n\n            var s_y;\n            var ext_y;\n            if (window.mode == 1) {\n                values = window.percent;\n                values_new = window.percentnew;\n                s_y = 'percent';\n                ext_y = 100;\n            } else {\n                values = window.absolut;\n                values_new = window.absolutnew;\n                s_y = 'absolut';\n                ext_y = Math.max(Math.max.apply(this, window.absolut),Math.max.apply(this, window.absolutnew));\n            }\n\n            str.get_string(s_y, 'gradereport_gradedist').done(function(s) {\n                window.chart.options.scales.yAxes[0].scaleLabel.labelString = s;\n                window.chart.options.scales.yAxes[0].ticks.suggestedMax = ext_y;\n\n                window.chart.data.datasets[0].data = values;\n                window.chart.data.datasets[1].data = values_new;\n                window.chart.update();\n            });\n        });\n\n        var cols = $('#id_grp_columns_actualcolumns, #id_grp_columns_newcolumns');\n        cols.click(instance, function() {\n            var column = (this.id === 'id_grp_columns_actualcolumns') ? 0 : 1;\n            if (this.checked) {\n                window.chart.data.datasets[column].hidden = false;\n                window.chart.update();\n            } else {\n                window.chart.data.datasets[column].hidden = true;\n                window.chart.update();\n            }\n        });\n\n        var toprint = $('.grgd_print');\n        var $printframe = $('#printframe');\n        toprint.click(instance, function() {\n            var imagePath = document.getElementById('chart_container').toDataURL(\"image/png\");\n            var content = '<!DOCTYPE html>' +\n                  '<html>' +\n                  '<head><title></title><script></script></head>' +\n                  '<body onload=\"\">' +\n                  '<img src=\"' + imagePath + '\" style=\"width: 100%;\" />' +\n                  '</body>' +\n                  '</html>';\n            $printframe[0].contentWindow.document.write(content);\n            setTimeout(function() { $printframe[0].contentWindow.print();}, 200);\n        });\n\n\n        var topdf = $('.grgd_pdf');\n        topdf.click(instance, function() {\n            require(['html2pdf'], function(html2pdf) {\n                var container = document.getElementById('chart_container');\n                var positionInfo = container.getBoundingClientRect();\n                var contheight = positionInfo.height;\n                var contwidth = positionInfo.width;\n                var opt = {\n                  margin:       1,\n                  filename:     'chart.pdf',\n                  image:        { type: 'png'},\n                  pagebreak:    { mode: 'avoid-all' },\n                  html2canvas:  { backgroundColor: '#ffffff'},\n                  jsPDF:        { unit: 'px', format: [contwidth,contheight*1.1], orientation: 'landscape' }\n                };\n                html2pdf(container, opt);\n            });\n        });\n\n        var topng = $('.grgd_png');\n        topng.click(instance, function() {\n            // Cross-browser compatibility (with IE 11) required.\n            require(['filesaver'],\n                function(saveAs) {\n                // Cross-browser compatibility (with IE 11) required.\n                $(\"#chart_container\").get(0).toBlob(function(blob) {\n                    saveAs(blob, \"chart.png\");\n                });\n            });\n        });\n\n        var tojpg = $('.grgd_jpg');\n        tojpg.click(instance, function() {\n            require(['filesaver'],\n                function(saveAs) {\n                // Cross-browser compatibility (with IE 11) required.\n                $(\"#chart_container\").get(0).toBlob(function(blob) {\n                    saveAs(blob, \"chart.jpg\");\n                }, \"image/jpeg\");\n            });\n        });\n\n        $('#letterform input[type=\"submit\"]').click(function() {\n            setTimeout(function() {instance.validate();}, 750);\n        });\n\n        instance.validate();\n    };\n\n    return instance;\n});\n"],"file":"gradedist.min.js"}